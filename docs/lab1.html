<p>&nbsp;</p>
<h2>Lab1: Architecting Highly Available and Scalable application with AWS EC2</h2>
<p><strong>What are we going to do?</strong>&nbsp; Build a Monolithic static web application and architect it into Highly Available and Scalable web application:</p>
<p><strong>Bad Approach:</strong></p>
<ol>
<li>Launch an EC2 instance with Amazon Linux OS and PublicIP address. Install Apache on it(Make sure that you enable Apache to start on boot).<br /><br />Help: <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html">Launch a Linux Instance</a><br /><a href="https://raw.githubusercontent.com/sudheerchamarthi/awslabs/master/installapache.sh">Commands to Install Apache<br /><br /></a></li>
<li>Backup: Create AMI of this Instance<br /><br /></li>
<li>Destroy to create Outage: Terminate the EC2 instance</li>
<li>Recover it: Launch new Instance from the created&nbsp;</li>
</ol>
<p>&nbsp;</p>
<p><strong>Not a Bad Approach:</strong></p>
<ol>
<li>Create another EC2 instance from the AMI<br /><br /></li>
<li>Of these two Instances, we will treat one an active Instance which will server Traffic and the other as Standby which we will bring up in case of any failure.<br /><br /></li>
<li>Create an Elastic IP(EIP) and associate it to standby EC2<br /><br /></li>
<li>Create Outage by stopping apache service in active Instance.<br /><br /></li>
<li>Failover to the standby Instance by Re-Associating the same&nbsp;Elastic IP(EIP) to the standby Instance</li>
</ol>
<p>&nbsp;</p>
<p><strong>Good Approach:</strong></p>
<ol>
<li><a href="http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-getting-started.html">Create an ELB</a><br /><br /></li>
<li>Lockdown Security Group rules of EC2 instances to allow traffic only from ELB SecurityGroup<br /><br /></li>
<li>Bring these 2 instances behind ELB.<br /><br /></li>
<li>Stop Apache service in any one of the EC2 instances. You can Observe ELB will mark that Instance as unhealthy and will not route traffic to that EC2 instance.&nbsp;<br /><br /></li>
</ol>
<p><strong>Better Approach:<br /><br /></strong>Spin up these 2 instances via ASG and add it behind ELB. Have scaling policies to automatically trigger new EC2 instance if the load is increased. Following are the detailed steps.</p>
<ol>
<li>Create <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/create-launch-config.html">Launch Configuration</a> and Pass this <a href="https://raw.githubusercontent.com/sudheerchamarthi/awslabs/master/installapache.sh">user data script</a>&nbsp;(Copy Paste the complete script) to install Apache and deploy sample webpage.<br /><br /></li>
<li>Create <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/GettingStartedTutorial.html#gs-create-asg">Autoscaling Group</a> with the above Launch Config. Make sure you select the ELB so that ASG will automatically register the Instances to ELB.&nbsp;<br /><br /></li>
<li>Add <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/policy-updating-console.html">Scaling Policies.<br /><br /></a></li>
<li>Terminate any one of the EC2 instances. In a few minutes, you can see ASG will spin up another EC2 instance.<br /><br /></li>
<li>Increase the CPU load on EC2 instance and in a few minutes, you can see ASG launching new Instance based on your scaling policy.<br /><br /></li>
</ol>
<h2>More Labs if You are interested: the below Labs one by one</h2>
<ul>
<li>LAB 1 -&nbsp;<a href="http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/EC2_GetStarted.html">Launch a Windows Instance</a></li>
<li>LAB 2 -&nbsp;<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html">Create EBS volume and attach to Instance</a></li>
<li>LAB 3 -&nbsp;<a href="http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ebs-using-volumes.html">Make EBS Volume available for use Windows</a></li>
<li>LAB 6 -&nbsp;<a href="http://docs.aws.amazon.com/cli/latest/reference/ec2/"><span style="color: #0000ff;">Use AWS CLI and create an EC2 Instance</span></a></li>
</ul>
<h2>&nbsp;</h2>
<p>&nbsp;</p>
